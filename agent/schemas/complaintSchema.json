{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "SafeChild Complaint Schema",
  "description": "Schema for validating child safety incident complaint data",
  "type": "object",
  "properties": {
    "complaint_id": {
      "type": "string",
      "description": "Unique identifier for the complaint",
      "pattern": "^COMP_\\d{8}_[A-F0-9]{8}$"
    },
    "status": {
      "type": "string",
      "enum": ["draft", "submitted", "under_review", "investigation", "resolved", "closed", "rejected"],
      "description": "Current status of the complaint"
    },
    "priority": {
      "type": "string",
      "enum": ["low", "medium", "high", "urgent", "critical"],
      "description": "Priority level of the complaint"
    },
    "created_at": {
      "type": "string",
      "format": "date-time",
      "description": "When the complaint was created"
    },
    "updated_at": {
      "type": "string",
      "format": "date-time",
      "description": "When the complaint was last updated"
    },
    "child_information": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "minLength": 1,
          "maxLength": 100,
          "description": "Full name of the child involved"
        },
        "age": {
          "type": "integer",
          "minimum": 0,
          "maximum": 18,
          "description": "Age of the child"
        },
        "gender": {
          "type": "string",
          "enum": ["male", "female", "non_binary", "other", "prefer_not_to_say"],
          "description": "Gender of the child"
        },
        "school": {
          "type": "string",
          "maxLength": 200,
          "description": "School or institution the child attends"
        },
        "grade": {
          "type": "string",
          "maxLength": 20,
          "description": "Grade level of the child"
        },
        "contact": {
          "type": "string",
          "maxLength": 50,
          "description": "Contact information for the child"
        }
      },
      "required": ["name", "age"],
      "additionalProperties": false
    },
    "incident_details": {
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "enum": [
            "physical_abuse",
            "verbal_abuse",
            "bullying",
            "inappropriate_touching",
            "harassment",
            "neglect",
            "cyber_bullying",
            "sexual_harassment",
            "emotional_abuse",
            "other"
          ],
          "description": "Type of incident that occurred"
        },
        "date": {
          "type": "string",
          "format": "date",
          "description": "Date when the incident occurred"
        },
        "time": {
          "type": "string",
          "pattern": "^([01]?[0-9]|2[0-3]):[0-5][0-9]$",
          "description": "Time when the incident occurred (HH:MM format)"
        },
        "location": {
          "type": "string",
          "minLength": 1,
          "maxLength": 500,
          "description": "Location where the incident occurred"
        },
        "description": {
          "type": "string",
          "minLength": 10,
          "maxLength": 5000,
          "description": "Detailed description of the incident"
        }
      },
      "required": ["type", "date", "time", "location", "description"],
      "additionalProperties": false
    },
    "guardian_information": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "minLength": 1,
          "maxLength": 100,
          "description": "Full name of the guardian/parent"
        },
        "phone": {
          "type": "string",
          "pattern": "^[+]?[0-9\\s\\-\\(\\)]{10,20}$",
          "description": "Phone number of the guardian"
        },
        "email": {
          "type": "string",
          "format": "email",
          "maxLength": 100,
          "description": "Email address of the guardian"
        },
        "address": {
          "type": "string",
          "maxLength": 500,
          "description": "Address of the guardian"
        },
        "relationship": {
          "type": "string",
          "maxLength": 50,
          "description": "Relationship to the child"
        }
      },
      "required": ["name", "phone"],
      "additionalProperties": false
    },
    "additional_details": {
      "type": "object",
      "properties": {
        "witnesses": {
          "type": "string",
          "maxLength": 1000,
          "description": "Information about any witnesses"
        },
        "evidence": {
          "type": "string",
          "maxLength": 1000,
          "description": "Available evidence or documentation"
        },
        "previous_incidents": {
          "type": "string",
          "maxLength": 1000,
          "description": "Information about previous similar incidents"
        }
      },
      "additionalProperties": false
    },
    "legal_preferences": {
      "type": "object",
      "properties": {
        "wants_legal_action": {
          "type": "boolean",
          "description": "Whether legal action is desired"
        },
        "wants_mediation": {
          "type": "boolean",
          "description": "Whether mediation is desired"
        },
        "wants_restraining_order": {
          "type": "boolean",
          "description": "Whether a restraining order is desired"
        },
        "wants_compensation": {
          "type": "boolean",
          "description": "Whether compensation is desired"
        },
        "additional_requests": {
          "type": "string",
          "maxLength": 1000,
          "description": "Any additional requests or concerns"
        }
      },
      "additionalProperties": false
    },
    "generated_content": {
      "type": "object",
      "properties": {
        "complaint_text": {
          "type": "string",
          "description": "Generated complaint draft text"
        },
        "generated_at": {
          "type": "string",
          "format": "date-time",
          "description": "When the complaint draft was generated"
        }
      },
      "additionalProperties": false
    },
    "metadata": {
      "type": "object",
      "properties": {
        "tags": {
          "type": "array",
          "items": {
            "type": "string",
            "maxLength": 50
          },
          "description": "Tags for categorizing the complaint"
        },
        "notes": {
          "type": "string",
          "maxLength": 2000,
          "description": "Internal notes about the complaint"
        },
        "assigned_to": {
          "type": "string",
          "maxLength": 100,
          "description": "Person assigned to handle the complaint"
        }
      },
      "additionalProperties": false
    }
  },
  "required": ["child_information", "incident_details", "guardian_information"],
  "additionalProperties": false,
  "definitions": {
    "phone_number": {
      "type": "string",
      "pattern": "^[+]?[0-9\\s\\-\\(\\)]{10,20}$",
      "description": "Phone number with optional country code and formatting"
    },
    "email_address": {
      "type": "string",
      "format": "email",
      "description": "Valid email address"
    },
    "date_format": {
      "type": "string",
      "format": "date",
      "description": "Date in YYYY-MM-DD format"
    },
    "time_format": {
      "type": "string",
      "pattern": "^([01]?[0-9]|2[0-3]):[0-5][0-9]$",
      "description": "Time in HH:MM format (24-hour)"
    }
  }
}
